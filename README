1.ディレクトリ構成

PySI_V0R8_SQL_031/
└─ pysi/
   ├─ app/
   │  ├─ orchestrator.py          ← ★（新規/移設）CLI & 関数API
   │  ├─ scenario_runner.py       ← ★ YAML実行（任意）
   │  └─ narrative_compiler.py    ← ★ ナラティブ→YAML（任意）
   ├─ db/
   │  ├─ schema.sql               ← 正本（既に有）
   │  ├─ apply_schema.py          ← ★ DDL適用
   │  ├─ calendar_iso.py          ← 既存を活用
   │  └─ calendar_sync.py         ← ★ plan境界同期ユーティリティ
   ├─ etl/
   │  └─ etl_monthly_to_lots.py   ← ★ CSV→週→lot
   ├─ io/
   │  └─ psi_io_adapters.py       ← ★ DB↔PSI I/O（S注入/書戻し）
   ├─ plan/
   │  ├─ engine_hardening.py      ← ★ 冪等S→P/I
   │  └─ run_pass.py              ← ★ post-order冪等パス
   ├─ report/
   │  └─ psi_report.py            ← 既存/置換どちらでも
   ├─ gui/
   │  └─ app.py                   ← 既存（**変更なし**でOK）
   └─ utils/
      └─ config.py                ← DBやデータパスを集約
var/
└─ psi.sqlite                     ← ★ 生成物の置き場所をここに一本化
data/
└─ S_month_data.csv               ← サンプル（任意）


2.起動方法

CLI派：
python -m pysi.app.orchestrator --db var\psi.sqlite --scenario Baseline --schema pysi\db\schema.sql --csv data\S_month_data.csv


GUI派：
main.py 起動で、裏でorchestrate→DB → GUIがそれを表示。

将来：
YAMLやNarrativeを使う場合は、scenario_runner.py を呼び出すだけでOK（GUIメニューからでもCLIでも同一API）。
